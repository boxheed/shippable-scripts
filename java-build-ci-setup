#!/usr/bin/env bash

set -e

echo "Setting up Java"
echo "Using $SHIPPABLE_JDK_VERSION"
echo "Installed Java Verions" 

ls /usr/lib/jvm

JVM_ROOT="/usr/lib/jvm"

case $SHIPPABLE_JDK_VERSION in
	oraclejdk7)
		JVM_PATH="java-7-oracle"
		;;
	oraclejdk8)
		JVM_PATH="java-8-oracle"
		;;
	oraclejdk9)
		JVM_PATH="java-9-oracle"
		;;
	oraclejdk10)
		JVM_PATH="java-10-oracle"
		;;
	openjdk7)
		JVM_PATH="java-7-openjdk-amd64"
		;;
	openjdk8)
		JVM_PATH="java-8-openjdk-amd64"
		;;
	openjdk9)
		JVM_PATH="java-9-openjdk-amd64"
		;;
  openjdk10)
		JVM_PATH="java-10-openjdk-amd64"
		;;
esac

export JAVA_HOME="$JVM_ROOT/$JVM_PATH"
export PATH="$PATH:$JAVA_HOME/bin"
export java_path="$JAVA_HOME/jre/bin/java"

update-alternatives --set java $java_path

echo "$JAVA_HOME"
echo "$PATH"
echo "java_path"
